{"version":3,"file":"mpulse.min.js","sources":["../src/mpulse.js"],"names":["window","fetchUrl","url","callback","xhrFn","XDomainRequest","xhrFnOnload","XMLHttpRequest","require","ActiveXObject","xhr","onload","responseText","onreadystatechange","readyState","open","send","generateSessionID","replace","c","r","Math","random","v","toString","createApp","key","options","ensureUrlPrefix","indexOf","forceSSL","location","protocol","getConfigUrl","configUrl","apiKey","getBeaconUrl","configJson","beacon_url","parseConfig","data","newConfigJson","JSON","parse","configkey","hasOwnProperty","e","initialized","sessionID","startSession","metricDefs","timerDefs","dimensionDefs","PageParams","cms","customMetrics","cts","customTimers","cds","customDimensions","i","length","m","name","label","t","d","configJsonRefresh","setTimeout","fetchConfig","REFRESH_CRUMB_INTERVAL","setImm","processQueue","getCurrentDimensions","copy","dimName","dimensions","addToQueue","type","value","beaconQueue","push","group","ab","calledFromTimer","processQueueWaiting","PROCESS_QUEUE_WAIT","q","shift","val","sendBeacon","params","sessionLength","sessionStart","fireEvent","paramsArray","encodeURIComponent","undefined","baseUrl","join","startTimer","latestTimerId","timers","time","now","stopTimer","id","timer","deltaMs","round","sendTimer","sendMetric","setViewGroup","getViewGroup","resetViewGroup","setAB","bucket","test","getAB","resetAB","setDimension","resetDimension","setSessionID","getSessionID","setSessionLength","incrementSessionLength","getSessionLength","subscribe","eventName","subscribers","payload","EVENTS","exports","noConflict","root","mPulse","previousObj","init","apps","app","defaultApp","APP_FUNCTIONS","fnName","getApp","nop","stop","MPULSE_VERSION","nowOffset","Date","process","nextTick","bind","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","fn","performance","methods","timing","navigationStart","version","define","amd","module"],"mappings":"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"}