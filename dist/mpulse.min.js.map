{"version":3,"file":"mpulse.min.js","sources":["../src/mpulse.js"],"names":["window","fetchUrl","url","callback","xhrFn","XMLHttpRequest","require","ActiveXObject","xhr","onreadystatechange","readyState","responseText","open","send","generateSessionID","replace","c","r","Math","random","v","toString","createApp","key","options","ensureUrlPrefix","indexOf","forceSSL","location","protocol","getConfigUrl","configUrl","apiKey","getBeaconUrl","configJson","beacon_url","parseConfig","data","newConfigJson","JSON","parse","configkey","hasOwnProperty","e","initialized","sessionID","startSession","metricDefs","timerDefs","dimensionDefs","PageParams","cms","customMetrics","cts","customTimers","cds","customDimensions","i","length","m","name","label","t","d","configJsonRefresh","setTimeout","fetchConfig","REFRESH_CRUMB_INTERVAL","setImm","processQueue","getCurrentDimensions","copy","dimName","dimensions","addToQueue","type","value","beaconQueue","push","group","calledFromTimer","processQueueWaiting","PROCESS_QUEUE_WAIT","q","shift","val","sendBeacon","params","sessionLength","sessionStart","fireEvent","paramsArray","encodeURIComponent","undefined","baseUrl","join","startTimer","latestTimerId","timers","time","now","stopTimer","id","timer","deltaMs","round","sendTimer","sendMetric","setViewGroup","resetViewGroup","setDimension","resetDimension","setSessionID","getSessionID","setSessionLength","incrementSessionLength","getSessionLength","subscribe","eventName","subscribers","payload","EVENTS","exports","noConflict","root","mPulse","previousObj","init","apps","app","defaultApp","APP_FUNCTIONS","fnName","getApp","nop","stop","MPULSE_VERSION","nowOffset","Date","process","nextTick","bind","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","fn","performance","methods","timing","navigationStart","version","define","amd","module"],"mappings":"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"}