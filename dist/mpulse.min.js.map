{"version":3,"sources":["../src/mpulse.js"],"names":["window","fetchUrl","url","callback","xhrFn","XDomainRequest","xhrFnOnload","XMLHttpRequest","require","ActiveXObject","xhr","onload","responseText","onreadystatechange","readyState","open","send","warn","message","console","createApp","key","skey","options","ensureUrlPrefix","indexOf","forceSSL","location","protocol","getConfigUrl","configUrl","ts","Date","apiKey","secretKey","t","CryptoJS","HmacSHA256","toString","signConfig","parseConfig","data","newConfigJson","JSON","parse","configkey","hasOwnProperty","configJson","e","initialized","sessionID","startSession","metricDefs","timerDefs","dimensionDefs","PageParams","cms","customMetrics","cts","customTimers","cds","customDimensions","i","length","m","name","label","d","configJsonRefresh","setTimeout","fetchConfig","REFRESH_CRUMB_INTERVAL","setImm","processQueue","addToQueue","type","value","beaconQueue","push","group","ab","dimensions","copy","dimName","getCurrentDimensions","when","calledFromTimer","q","shift","val","sendBeacon","processQueueWaiting","PROCESS_QUEUE_WAIT","params","sessionStart","sessionLength","MPULSE_VERSION","fireEvent","paramsArray","encodeURIComponent","undefined","baseUrl","beacon_url","join","sendTimer","Math","round","resetDimension","setSessionID","id","getSessionID","replace","c","r","random","setSessionLength","setSessionStart","now","start","eventName","payload","subscribers","timers","latestTimerId","EVENTS","startTimer","time","stopTimer","timer","deltaMs","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","bucket","test","getABTest","resetABTest","setDimension","incrementSessionLength","getSessionLength","getSessionStart","transferBoomerangSession","frame","BOOMR","session","ID","subscribe","nop","APP_FUNCTIONS","nowOffset","process","nextTick","bind","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","fn","performance","methods","timing","navigationStart","mPulse","root","previousObj","defaultApp","apps","version","noConflict","init","app","fnName","getApp","stop","module","exports"],"mappings":";;CAKC,SAASA,GACN,aAgFA,SAASC,EAASC,EAAKC,GAEdC,IAC6B,mBAAnBC,gBACmB,iBAAnBA,gBACPC,GAAc,EACdF,EAAQ,WACJ,OAAO,IAAIC,iBAEkB,mBAAnBE,gBACY,iBAAnBA,eACPH,EAAQ,WACJ,OAAO,IAAIG,gBAEW,mBAAZC,QACdJ,EAAQ,WAEJ,OAAO,IAAIG,EADUC,QAAQ,kBAAkBD,iBAG5CP,QAA0C,IAAzBA,EAAOS,gBAC/BL,EAAQ,WACJ,OAAO,IAAIJ,EAAOS,cAAc,wBAM5C,IAAIC,EAAMN,IAGc,mBAAbD,IACHG,EACAI,EAAIC,OAAS,WACTR,EAASO,EAAIE,eAGjBF,EAAIG,mBAAqB,WAEE,IAAnBH,EAAII,YACJX,EAASO,EAAIE,gBAM7BF,EAAIK,KAAK,MAAOb,GAAK,GACrBQ,EAAIM,OAmFR,SAASC,EAAKC,GACa,iBAAZC,SAAgD,mBAAjBA,QAAQF,MAC9CE,QAAQF,KAAK,WAAaC,GAmDlC,SAASE,EAAUC,EAAKC,EAAMC,GAiG1B,SAASC,EAAgBtB,GACrB,OAAgC,IAA5BA,EAAIuB,QAAQ,aACiB,IAA7BvB,EAAIuB,QAAQ,YAELvB,GAGPwB,EAEAxB,EAAM,SAAWA,OACQ,IAAXF,GAEgB,IAA1BE,EAAIuB,QAAQ,WACZvB,EAAM,QAAUA,QAEK,IAAXF,GAAuD,UAA7BA,EAAO2B,SAASC,WAE1B,IAA1B1B,EAAIuB,QAAQ,WACZvB,EAAM,QAAUA,GAIjBA,GAQX,SAAS2B,IACL,IAAI3B,EAAM4B,EAENC,GAAM,IAAKC,KAiBf,OAf0B,IAAtB9B,EAAIuB,QAAQ,KACZvB,GAAO,IAEPA,GAAO,IAIXA,GAAO,OAAS+B,EAGhB/B,GAAO,MAAQ6B,EAGf7B,GAAO,MA1Kf,SAAoB+B,EAAQC,EAAWC,GACnC,GAAwB,oBAAbC,UACwB,mBAAxBA,SAASC,WAEhB,OADApB,EAAK,2DACE,GAGX,IAAIC,EAAU,OAASe,EAAS,MAAQE,EAExC,OAAOC,SAASC,WAAWnB,EAASgB,GAAWI,WAiK5BC,CAAWN,EAAQC,EAAWH,GAEtCP,EAAgBtB,GAmB3B,SAASsC,EAAYC,GACjB,IAEI,IAAIC,EAAgBC,KAAKC,MAAMH,GAG/B,IAAK,IAAII,KAAaH,EACdA,EAAcI,eAAeD,KAC7BE,EAAWF,GAAaH,EAAcG,IAGhD,MAAOG,GAEL,YADAC,GAAc,GAelB,GAVKC,GACDC,EAAaJ,EAAuB,YAIxCK,KACAC,KACAC,KAGIP,EAAWQ,WAAY,CAEvB,IAAIC,EAAMT,EAAWQ,WAAWE,cAC5BC,EAAMX,EAAWQ,WAAWI,aAC5BC,EAAMb,EAAWQ,WAAWM,iBAEhC,GAAIL,EACA,IAAKM,EAAI,EAAGA,EAAIN,EAAIO,OAAQD,IAAK,CAC7B,IAAIE,EAAIR,EAAIM,GACZV,EAAWY,EAAEC,MAAQD,EAAEE,MAK/B,GAAIR,EACA,IAAKI,EAAI,EAAGA,EAAIJ,EAAIK,OAAQD,IAAK,CAC7B,IAAI3B,EAAIuB,EAAII,GACZT,EAAUlB,EAAE8B,MAAQ9B,EAAE+B,MAK9B,GAAIN,EACA,IAAKE,EAAI,EAAGA,EAAIF,EAAIG,OAAQD,IAAK,CAC7B,IAAIK,EAAIP,EAAIE,GACZR,EAAca,EAAEF,MAAQE,EAAED,OAMtCjB,GAAc,EAGdmB,GAAoB,EACpBC,WAAWC,EAAaC,GAGxBC,EAAOC,GAMX,SAASH,IACL,GAAkB,KAAdxC,EAAJ,CAIA,IAAI5B,EAAM2B,IAGNuC,IAEAlE,GAAO,OAGXD,EAASC,EAAKsC,IA2BlB,SAASkC,EAAWC,EAAMV,EAAMW,GAE5BC,EAAYC,MACRH,KAAMA,EACNV,KAAMA,EACNW,MAAOA,EACPG,MAAOA,EACPC,GAAIA,EACJC,WA3BR,WACI,IAAIC,KAEJ,IAAK,IAAIC,KAAWF,EACZA,EAAWnC,eAAeqC,KAC1BD,EAAKC,GAAWF,EAAWE,IAInC,OAAOD,EAkBSE,GACZC,MAAO,IAAKrD,OASpB,SAASyC,EAAaa,GAClB,GAA2B,IAAvBT,EAAYd,OAKhB,GAAKd,EAAL,CAeA,IAAIsC,EAAIV,EAAYW,QAEhBb,EAAOY,EAAEZ,KACTV,EAAOsB,EAAEtB,KACTwB,EAAMF,EAAEX,MAGRnC,KAGmB,kBAAZ8C,EAAER,QACTtC,EAAK,QAAU8C,EAAER,OAGD,kBAATQ,EAAEP,KACTvC,EAAK,QAAU8C,EAAEP,IAIrBvC,EAAK,aAAeA,EAAK,UAAY8C,EAAEF,KAGvC,IAAK,IAAIF,KAAWI,EAAEN,WACdM,EAAEN,WAAWnC,eAAeqC,UACU,IAA3B7B,EAAc6B,GACrB1C,EAAKa,EAAc6B,IAAYI,EAAEN,WAAWE,GAE5ClE,EAAK,qBAAuBkE,EAAU,qBAMrC,WAATR,OACgC,IAArBvB,EAAWa,IAClBxB,EAAKW,EAAWa,IAASwB,EACzBC,EAAWjD,IAEXxB,EAAK,kBAAoBgD,EAAO,oBAEpB,UAATU,SACwB,IAApBtB,EAAUY,IACjBxB,EAAc,QAAIY,EAAUY,GAAQ,IAAMwB,EAC1CC,EAAWjD,IAEXxB,EAAK,iBAAmBgD,EAAO,qBAKvCO,EAAOC,QA/DEkB,IAAuBL,IACxBK,GAAsB,EAGtBtB,WAAW,WACPI,GAAa,IACdmB,IAiEf,SAASF,EAAWG,GAChBA,EAAU,EAAI9C,EAAwB,YACtC8C,EAAO,SAAW9C,EAAW,SAC7B8C,EAAO,OAAS9C,EAAW,OAC3B8C,EAAO,QAAU9C,EAAW,QAC5B8C,EAAO,OAAS9C,EAAW,OAC3B8C,EAAO,kBAAoB,MAC3BA,EAAO,YAAc,OAEH,IAAd3C,IACA2C,EAAO,SAAW3C,EAClB2C,EAAO,SAAWC,EAClBD,EAAO,SAAWE,GAGtBF,EAAY,IAAI,EAChBA,EAAO,SAAW,EAClBA,EAAO,SAAW,KAClBA,EAAO,UAAYG,EAGnBC,EAAU,gBAAiBJ,GAG3B,IAAIK,KACJ,IAAK,IAAIjC,KAAQ4B,EACTA,EAAO/C,eAAemB,IACtBiC,EAAYpB,KAAKqB,mBAAmBlC,GAC9B,UAEmBmC,IAAjBP,EAAO5B,IAAwC,OAAjB4B,EAAO5B,GAC/B,GACAkC,mBAAmBN,EAAO5B,MAOhD,IAAIoC,EA/PG7E,EAFGuB,EAAWuD,YAoQjBpG,EAAMmG,GAAYA,EAAQ5E,QAAQ,MAAQ,EAAK,IAAM,KAAOyE,EAAYK,KAAK,KAGjFN,EAAU,SAAUJ,GAGpB5F,EAASC,GAsEb,SAASsG,EAAUvC,EAAMW,GACrB,MAAoB,iBAATX,GACC,EAGS,iBAAVW,GAAsBA,EAAQ,GAC7B,GAGZA,EAAQ6B,KAAKC,MAAM9B,GACnBF,EAAW,QAAST,EAAMW,GAC1BJ,EAAOC,GAEAG,GA2HX,SAAS+B,EAAe1C,QACA,IAATA,QACqB,IAArBgB,EAAWhB,WACXgB,EAAWhB,GAS1B,SAAS2C,EAAaC,GACA,iBAAPA,GACO,iBAAPA,IAKO,iBAAPA,IACPA,EAAK,GAAKA,GAGd3D,EAAY2D,GAQhB,SAASC,IACL,OAAO5D,EAWX,SAASC,EAAa0D,GAUlB,OARAD,EAAaC,GA1sBV,uCAAuCE,QAAQ,QAAS,SAASC,GACpE,IAAIC,EAAoB,GAAhBR,KAAKS,SAAgB,EAE7B,OADc,MAANF,EAAYC,EAAS,EAAJA,EAAU,GAC1B3E,SAAS,OA0sBlB6E,EAAiB,GAGjBC,EAAgBC,KAETP,IAeX,SAASK,EAAiBpD,GACA,iBAAXA,GACPA,EAAS,IAIbgC,EAAgBhC,GAiBpB,SAASqD,EAAgBE,GACA,iBAAVA,GACPA,EAAQ,IAIZxB,EAAewB,GAkEnB,SAASrB,EAAUsB,EAAWC,GAC1B,IAAK,IAAI1D,EAAI,EAAGA,EAAI2D,EAAYF,GAAWxD,OAAQD,IAE/C2D,EAAYF,GAAWzD,GAAG0D,GAzxBlCjG,EAAUA,MAOV,IAAIU,EAASZ,EAGTa,EAAYZ,EAGZQ,EAAY,uCAGZJ,GAAW,EAGXqB,KAIAqB,GAAoB,EAGpBnB,GAAc,EAGd4B,KAGAc,GAAsB,EAGtBZ,GAAQ,EAGRC,GAAK,EAGLC,KAGA3B,KAGAJ,GAAY,EAGZE,KAGAsE,KAGArE,KAGAsE,GAAiB,EAGjB7B,EAAeuB,IAGftB,EAAgB,EAEhB0B,KACJ,IAAK3D,EAAI,EAAGA,EAAI8D,EAAO7D,OAAQD,IAC3B2D,EAAYG,EAAO9D,YAQU,IAAtBvC,EAAQO,YACfA,EAAYP,EAAQO,WAGpBP,EAAQG,WACRA,GAAW,GAuVf4C,IAmZA,OA3BIuD,WA3WJ,SAAoB5D,GAChB,MAAoB,iBAATA,GACC,GAIZ0D,IAEAD,EAAOC,IACHG,KAAMT,IACNpD,KAAMA,GAGH0D,IA+VPI,UApVJ,SAAmBlB,GACf,GAAkB,iBAAPA,GAAmBA,EAAK,EAC/B,OAAQ,EAGZ,IAAImB,EAAQN,EAAOb,GACfoB,EAAU,EAEd,OAAID,GACAC,EAAUxB,KAAKC,MAAMW,IAAQW,EAAMF,MACnCtB,EAAUwB,EAAM/D,KAAMgE,UAGfP,EAAOb,GAKXoB,IAHK,GAsUZzB,UAAWA,EACX0B,WAnSJ,SAAoBjE,EAAMW,GACF,iBAATX,SAIU,IAAVW,GACU,iBAAVA,SAIU,IAAVA,IACPA,EAAQ,GAGZF,EAAW,SAAUT,EAAMW,GAC3BJ,EAAOC,MAqRP0D,aA7QJ,SAAsBlE,GACE,iBAATA,IAIXc,EAAQd,IAyQRmE,aAjQJ,WACI,OAAOrD,GAiQPsD,eA3PJ,WACItD,GAAQ,GA2PRuD,UA5OJ,SAAmBC,GACf,MAAsB,iBAAXA,IAImC,IAA1C,yBAAyBC,KAAKD,KAIlCvD,EAAKuD,GAEE,IAkOPE,UA1NJ,WACI,OAAOzD,GA0NP0D,YApNJ,WACI1D,GAAK,GAoNL2D,aA3MJ,SAAsB1E,EAAMW,QACJ,IAATX,SAIU,IAAVW,EAMXK,EAAWhB,GAAQW,EAJf+B,EAAe1C,KAqMnB0C,eAAgBA,EAChBC,aAAcA,EACdE,aAAcA,EACd3D,aAAcA,EACdyF,uBAlIJ,WACI7C,KAkIAoB,iBAAkBA,EAClB0B,iBA7GJ,WACI,OAAO9C,GA6GPqB,gBAAiBA,EACjB0B,gBAxFJ,WACI,OAAOhD,GAwFPiD,yBA9EJ,SAAkCC,GAM9B,YALqB,IAAVA,QACW,IAAXhJ,IACPgJ,EAAQhJ,WAGS,IAAVgJ,GACPA,EAAMC,OACND,EAAMC,MAAMC,SACZF,EAAMC,MAAMC,QAAQC,IACpBH,EAAMC,MAAMC,QAAQ5B,OACpB0B,EAAMC,MAAMC,QAAQnF,UAEpB6C,EAAaoC,EAAMC,MAAMC,QAAQC,GAAK,IAAM1C,KAAKC,MAAMsC,EAAMC,MAAMC,QAAQ5B,MAAQ,KAAMhF,SAAS,KAClG6E,EAAiB6B,EAAMC,MAAMC,QAAQnF,QACrCqD,EAAgB4B,EAAMC,MAAMC,QAAQ5B,QAE7B,IA8DX8B,UAlDJ,SAAmB7B,EAAWpH,GACrBsH,EAAY3E,eAAeyE,IAIR,mBAAbpH,GAIXsH,EAAYF,GAAWzC,KAAK3E,IA4C5BqC,YAAaA,GA6GrB,SAAS6G,KAtqCT,IA6CIjJ,EAgBAoE,EA7DAD,EAAyB,IAGzBqB,EAAqB,IAGrBI,EAAiB,QAGjBsD,GACA,aACA,YACA,YACA,aACA,eACA,eACA,iBACA,YACA,YACA,cACA,eACA,iBACA,eACA,eACA,eACA,yBACA,mBACA,mBACA,kBACA,kBACA,2BACA,aAGA1B,GACA,gBACA,UAMA9D,EAAI,EAMJxD,GAAc,EAGd+G,GAAM,EAGNkC,GAAa,IAAKvH,KAqGtB,GA3BIwC,EAHmB,oBAAZgF,SACqB,mBAArBA,QAAQC,SAEND,QAAQC,SAASC,KAAKF,cACN,IAAXxJ,EAEVA,EAAO2J,aACE3J,EAAO2J,aAAaD,KAAK1J,GAC3BA,EAAO4J,eACL5J,EAAO4J,eAAeF,KAAK1J,GAC7BA,EAAO6J,mBACL7J,EAAO6J,mBAAmBH,KAAK1J,GACjCA,EAAO8J,gBACL9J,EAAO8J,gBAAgBJ,KAAK1J,GAG5B,SAAS+J,GACd1F,WAAW0F,EAAI,KAKd,SAASA,GACd1F,WAAW0F,EAAI,UAOD,IAAX/J,EAEP,QAAkC,IAAvBA,EAAOgK,aACoB,mBAA3BhK,EAAOgK,YAAY3C,IAE1BA,EAAMrH,EAAOgK,YAAY3C,IAAIqC,KAAK1J,EAAOgK,kBACtC,QAAkC,IAAvBhK,EAAOgK,YAA6B,CAElD,IAAIC,GAAW,YAAa,QAAS,UAErC,IAAKnG,EAAI,EAAGA,EAAImG,EAAQlG,OAAQD,IAC5B,GAA8C,mBAAnC9D,EAAOgK,YAAYC,EAAQnG,IAAoB,CACtDuD,EAAMrH,EAAOgK,YAAYC,EAAQnG,IACjC,YAOM,IAAX9D,GACP,gBAAiBA,GACjBA,EAAOgK,aACPhK,EAAOgK,YAAYE,QACnBlK,EAAOgK,YAAYE,OAAOC,kBAC1BZ,EAAYvJ,EAAOgK,YAAYE,OAAOC,iBAGrC9C,IAGGA,EADgB,oBAATrF,MAAwBA,KAAKqF,IAC9B,WACF,OAAOrF,KAAKqF,MAAQkC,GAIlB,WACF,OAAQ,IAAKvH,KAAUuH,IAo4BnC,IAAIa,EAaAC,EACAC,EAXAC,GAAa,EAGbC,KA+HJ,SAtHsB,IAAXxK,IAEPsK,GADAD,EAAOrK,GACYoK,QAmGvBA,GAEIK,QAASzE,EAMT0E,WA/FJ,WAEI,OADAL,EAAKD,OAASE,EACPF,GA8FPO,KAlFJ,SAAc1I,EAAQC,EAAWX,GAG7B,GAFAA,EAAUA,WAEY,IAAXU,EAAX,CAKA,QAAyB,IAAdC,EAAX,CAMA,QAA4B,IAAjBX,EAAQ0C,WACe,IAAvBuG,EAAKjJ,EAAQ0C,MACpB,OAAOuG,EAAKjJ,EAAQ0C,MAGxB,IAAI2G,EAAMxJ,EAAUa,EAAQC,EAAWX,GAGvC,IAAmB,IAAfgJ,EAAsB,CACtBA,EAAaK,EAGb,IAAK,IAAI9G,EAAI,EAAGA,EAAIwF,EAAcvF,OAAQD,IAAK,CAC3C,IAAI+G,EAASvB,EAAcxF,GAC3BsG,EAAOS,GAAUN,EAAWM,IASpC,YAJ4B,IAAjBtJ,EAAQ0C,OACfuG,EAAKjJ,EAAQ0C,MAAQ2G,GAGlBA,EA5BH3J,EAAK,gDALLA,EAAK,0CA+ET6J,OApCJ,SAAgB7G,GACZ,OAAOuG,EAAKvG,IAoCZ8G,KApBJ,SAAc9G,QACgB,IAAfuG,EAAKvG,WACLuG,EAAKvG,IAmBhBoD,IAAKA,GAKJvD,EAAI,EAAGA,EAAIwF,EAAcvF,OAAQD,IAClCsG,EAAOd,EAAcxF,IAAMuF,EAMT,oBAAX2B,QAA0BA,OAAOC,QAIxCD,OAAOC,QAAUb,OACM,IAATC,IAIdA,EAAKD,OAASA,GAjuCtB,CAmuCoB,oBAAXpK,OAAyBA,YAASoG","file":"mpulse.min.js"}