{"version":3,"file":"mpulse.min.js","sources":["../src/mpulse.js"],"names":["window","fetchUrl","url","callback","xhrFn","XDomainRequest","xhrFnOnload","XMLHttpRequest","require","ActiveXObject","xhr","onload","responseText","onreadystatechange","readyState","open","send","generateSessionID","replace","c","r","Math","random","v","toString","signConfig","apiKey","secretKey","t","CryptoJS","HmacSHA256","message","createApp","key","skey","options","ensureUrlPrefix","indexOf","forceSSL","location","protocol","getConfigUrl","configUrl","ts","Date","getBeaconUrl","configJson","beacon_url","parseConfig","data","newConfigJson","JSON","parse","configkey","hasOwnProperty","e","initialized","sessionID","startSession","metricDefs","timerDefs","dimensionDefs","PageParams","cms","customMetrics","cts","customTimers","cds","customDimensions","i","length","m","name","label","d","configJsonRefresh","setTimeout","fetchConfig","REFRESH_CRUMB_INTERVAL","setImm","processQueue","getCurrentDimensions","copy","dimName","dimensions","addToQueue","type","value","beaconQueue","push","group","ab","when","calledFromTimer","processQueueWaiting","PROCESS_QUEUE_WAIT","q","shift","val","sendBeacon","params","round","sessionStart","nowOffset","sessionLength","MPULSE_VERSION","fireEvent","paramsArray","encodeURIComponent","undefined","baseUrl","join","startTimer","latestTimerId","timers","time","now","stopTimer","id","timer","deltaMs","sendTimer","sendMetric","setPageGroup","getPageGroup","resetPageGroup","setABTest","bucket","test","getABTest","resetABTest","setDimension","resetDimension","setSessionID","getSessionID","setSessionLength","incrementSessionLength","getSessionLength","subscribe","eventName","subscribers","payload","EVENTS","exports","noConflict","root","mPulse","previousObj","init","apps","app","defaultApp","APP_FUNCTIONS","fnName","getApp","nop","stop","process","nextTick","bind","setImmediate","msSetImmediate","webkitSetImmediate","mozSetImmediate","fn","performance","methods","timing","navigationStart","version","define","amd","module"],"mappings":"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"}