/*! mpulse v0.0.1 */

!function(a){"use strict";function b(b,c){q||("function"==typeof XMLHttpRequest?q=function(){return new XMLHttpRequest}:"function"==typeof require?q=function(){var a=require("xmlhttprequest").XMLHttpRequest;return new a}:a&&"undefined"!=typeof a.ActiveXObject&&(q=function(){return new a.ActiveXObject("Microsoft.XMLHTTP")}));var d=q();d.onreadystatechange=function(){4===d.readyState&&c&&c(d.responseText)},d.open("GET",b,!0),d.send()}function c(b){"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick(b):"undefined"!=typeof a?a.setImmediate?a.setImmediate(b):a.msSetImmediate?a.msSetImmediate(b):a.webkitSetImmediate?a.webkitSetImmediate(b):a.mozSetImmediate?a.mozSetImmediate(b):setTimeout(b,10):setTimeout(b,10)}function d(d,e){function f(b){return-1!==b.indexOf("http://")||-1!==b.indexOf("https://")?b:(E?b="https:"+b:"undefined"==typeof a?-1===b.indexOf("http:")&&(b="http:"+b):"undefined"!=typeof a&&"file:"===a.location.protocol&&-1===b.indexOf("http:")&&(b="http:"+b),b)}function g(){var a=D;return a+=-1!==a.indexOf("?")?"&":"?",a+="key="+C,a+="&acao=",f(a)}function h(){var a=F.beacon_url;return a+=-1!==a.indexOf("?")?"&":"?",a+="acao=1",f(a)}function i(a){try{var b=JSON.parse(a);for(var d in b)b.hasOwnProperty(d)&&(F[d]=b[d])}catch(e){return void(H=!1)}if(N={},P={},L={},F.PageParams){var f=F.PageParams.customMetrics,g=F.PageParams.customTimers,h=F.PageParams.customDimensions;if(f)for(w=0;w<f.length;w++){var i=f[w];N[i.name]=i.label}if(g)for(w=0;w<g.length;w++){var k=g[w];P[k.name]=k.label}if(h)for(w=0;w<h.length;w++){var l=h[w];L[l.name]=l.label}}H=!0,G=!0,setTimeout(j.bind(this),r),c(m)}function j(){var a=g();G&&(a+="&r="),b(a,i.bind(this))}function k(){var a={};for(var b in K)K.hasOwnProperty(b)&&(a[b]=K[b]);return a}function l(a,b,c){I.push({type:a,name:b,value:c,group:J,dimensions:k()})}function m(){if(0!==I.length){if(!H)return void setTimeout(m,5e3);var a=I.shift(),b=a.type,d=a.name,e=a.value,f={};"boolean"!=typeof a.group&&(f["h.pg"]=a.group);for(var g in a.dimensions)a.dimensions.hasOwnProperty(g)&&"undefined"!=typeof L[g]&&(f[L[g]]=a.dimensions[g]);"metric"===b?"undefined"!=typeof N[d]&&(f[N[d]]=e,o(f)):"timer"===b&&"undefined"!=typeof P[d]&&(f.t_other=P[d]+"|"+e,o(f)),c(m)}}function n(){return M?M:F.session_id}function o(a){S++,a.d=F.site_domain,a["h.key"]=F["h.key"],a["h.d"]=F["h.d"],a["h.cr"]=F["h.cr"],a["h.t"]=F["h.t"],a["rt.si"]=n(),a["rt.ss"]=R,a["rt.sl"]=S,a["http.initiator"]="api",a.api=1,a.v=1,a.u="http://"+F.site_domain,a.t_done=0;var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(encodeURIComponent(d)+"="+(void 0===a[d]||null===a[d]?"":encodeURIComponent(a[d])));var e=h(),f=e+(e.indexOf("?")>-1?"&":"?")+c.join("&");b(f)}function p(a){return Q++,O[Q]={time:t(),name:a},Q}function q(a){var b=O[a];b&&s(b.name,t()-b.time)}function s(a,b){l("timer",a,b),c(m)}function u(a,b){l("metric",a,b||1),c(m)}function v(a){J=a}function x(){J=!1}function y(a,b){K[a]=b}function z(a){void 0!==typeof K[a]&&delete K[a]}function A(a){M=a}function B(){return n()}e=e||{};var C=d,D="//c.go-mpulse.net/api/config.json",E=!1,F={},G=!1,H=!1,I=[],J=!1,K={},L={},M=!1,N={},O={},P={},Q=-1,R=t(),S=0;e.configUrl&&(D=e.configUrl),e.forceSSL&&(E=!0),j();var T={startTimer:p,stopTimer:q,sendTimer:s,sendMetric:u,setViewGroup:v,resetViewGroup:x,setDimension:y,resetDimension:z,setSessionID:A,getSessionID:B};return T}function e(){return y.mPulse=z,x}function f(a,b){var c=d(a,b);return A===!1&&(A=c),void 0!==typeof b.name&&(B[b.name]=c),c}function g(a){return A!==!1?A.startTimer(a):void 0}function h(a){A!==!1&&A.stopTimer(a)}function i(a,b){A!==!1&&A.sendTimer(a,b)}function j(a,b){A!==!1&&A.sendMetric(a,b)}function k(a){A!==!1&&A.setViewGroup(a)}function l(){A!==!1&&A.resetViewGroup()}function m(a,b){A!==!1&&A.setDimension(a,b)}function n(a){A!==!1&&A.resetDimension(a)}function o(a){A!==!1&&A.setSessionID(a)}function p(){return A!==!1?A.getSessionID():void 0}var q,r=3e5,s="0.0.1",t=!1,u=+new Date;if("undefined"!=typeof a)if("undefined"!=typeof a.performance&&"function"==typeof a.performance.now)t=a.performance.now;else if("undefined"!=typeof a.performance)for(var v=["webkitNow","msNow","mozNow"],w=0;w<v.length;w++)if("function"==typeof a.performance[v[w]]){t=a.performance[v[w]];break}t||("undefined"!=typeof a&&a.performance&&a.performance.timing&&a.performance.timing.navigationStart&&(u=a.performance.timing.navigationStart),t=Date.now?function(){return Date.now()-u}:function(){return+new Date-u});var x,y,z,A=!1,B={};"undefined"!=typeof a&&(y=a,z=y.mPulse),x={version:s,noConflict:e,init:f,startTimer:g,stopTimer:h,sendTimer:i,sendMetric:j,setViewGroup:k,resetViewGroup:l,setDimension:m,resetDimension:n,setSessionID:o,getSessionID:p},"function"==typeof define&&define.amd?define([],function(){return x}):"undefined"!=typeof module&&module.exports?module.exports=x:"undefined"!=typeof y&&(y.mPulse=x)}("undefined"!=typeof window?window:void 0);
//# sourceMappingURL=mpulse.min.js.map