/*! mpulse v0.0.1 */

!function(a){"use strict";function b(b,c){h||("function"==typeof XMLHttpRequest?h=function(){return new XMLHttpRequest}:"function"==typeof require?h=function(){var a=require("xmlhttprequest").XMLHttpRequest;return new a}:a&&"undefined"!=typeof a.ActiveXObject&&(h=function(){return new a.ActiveXObject("Microsoft.XMLHTTP")}));var d=h();d.onreadystatechange=function(){4===d.readyState&&c&&c(d.responseText)},d.open("GET",b,!0),d.send()}function c(b){"undefined"!=typeof process&&"function"==typeof process.nextTick?process.nextTick(b):"undefined"!=typeof a?a.setImmediate?a.setImmediate(b):a.msSetImmediate?a.msSetImmediate(b):a.webkitSetImmediate?a.webkitSetImmediate(b):a.mozSetImmediate?a.mozSetImmediate(b):setTimeout(b,10):setTimeout(b,10)}function d(d,e){function f(b){return-1!==b.indexOf("http://")||-1!==b.indexOf("https://")?b:(E?b="https:"+b:"undefined"==typeof a?-1===b.indexOf("http:")&&(b="http:"+b):"undefined"!=typeof a&&"file:"===a.location.protocol&&-1===b.indexOf("http:")&&(b="http:"+b),b)}function g(){var a=D;return a+=-1!==a.indexOf("?")?"&":"?",a+="key="+C,a+="&acao=",f(a)}function h(){var a=F.beacon_url;return a+=-1!==a.indexOf("?")?"&":"?",a+="acao=1",f(a)}function j(a){try{var b=JSON.parse(a);for(var d in b)b.hasOwnProperty(d)&&(F[d]=b[d])}catch(e){return void(H=!1)}if(N={},P={},L={},F.PageParams){var f=F.PageParams.customMetrics,g=F.PageParams.customTimers,h=F.PageParams.customDimensions;if(f)for(o=0;o<f.length;o++){var j=f[o];N[j.name]=j.label}if(g)for(o=0;o<g.length;o++){var l=g[o];P[l.name]=l.label}if(h)for(o=0;o<h.length;o++){var m=h[o];L[m.name]=m.label}}H=!0,G=!0,setTimeout(k.bind(this),i),c(p)}function k(){var a=g();G&&(a+="&r="),b(a,j.bind(this))}function m(){var a={};for(var b in K)K.hasOwnProperty(b)&&(a[b]=K[b]);return a}function n(a,b,c){I.push({type:a,name:b,value:c,group:J,dimensions:m()})}function p(){if(0!==I.length){if(!H)return void setTimeout(p,5e3);var a=I.shift(),b=a.type,d=a.name,e=a.value,f={};"boolean"!=typeof a.group&&(f["h.pg"]=a.group);for(var g in a.dimensions)a.dimensions.hasOwnProperty(g)&&"undefined"!=typeof L[g]&&(f[L[g]]=a.dimensions[g]);"metric"===b?"undefined"!=typeof N[d]&&(f[N[d]]=e,r(f)):"timer"===b&&"undefined"!=typeof P[d]&&(f.t_other=P[d]+"|"+e,r(f)),c(p)}}function q(){return M?M:F.session_id}function r(a){S++,a.d=F.site_domain,a["h.key"]=F["h.key"],a["h.d"]=F["h.d"],a["h.cr"]=F["h.cr"],a["h.t"]=F["h.t"],a["rt.si"]=q(),a["rt.ss"]=R,a["rt.sl"]=S,a["http.initiator"]="api",a.api=1,a.v=1,a.u="http://"+F.site_domain,a.t_done=0;var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push(encodeURIComponent(d)+"="+(void 0===a[d]||null===a[d]?"":encodeURIComponent(a[d])));var e=h(),f=e+(e.indexOf("?")>-1?"&":"?")+c.join("&");b(f)}function s(a){return Q++,O[Q]={time:l(),name:a},Q}function t(a){var b=O[a];b&&u(b.name,l()-b.time)}function u(a,b){n("timer",a,b),c(p)}function v(a,b){n("metric",a,b||1),c(p)}function w(a){J=a}function x(){J=!1}function y(a,b){K[a]=b}function z(a){void 0!==typeof K[a]&&delete K[a]}function A(a){M=a}function B(){return q()}e=e||{};var C=d,D="//c.go-mpulse.net/api/config.json",E=!1,F={},G=!1,H=!1,I=[],J=!1,K={},L={},M=!1,N={},O={},P={},Q=-1,R=l(),S=0;e.configUrl&&(D=e.configUrl),e.forceSSL&&(E=!0),k();var T={startTimer:s,stopTimer:t,sendTimer:u,sendMetric:v,setViewGroup:w,resetViewGroup:x,setDimension:y,resetDimension:z,setSessionID:A,getSessionID:B};return T}function e(){return q.mPulse=r,p}function f(a,b){var c=d(a,b);return s===!1&&(s=c),void 0!==typeof b.name&&(t[b.name]=c),c}function g(){}var h,i=3e5,j="0.0.1",k=["startTimer","stopTimer","sendTimer","sendMetric","setViewGroup","resetViewGroup","setDimension","resetDimension","setSessionID","getSessionID"],l=!1,m=+new Date;if("undefined"!=typeof a)if("undefined"!=typeof a.performance&&"function"==typeof a.performance.now)l=a.performance.now;else if("undefined"!=typeof a.performance)for(var n=["webkitNow","msNow","mozNow"],o=0;o<n.length;o++)if("function"==typeof a.performance[n[o]]){l=a.performance[n[o]];break}l||("undefined"!=typeof a&&a.performance&&a.performance.timing&&a.performance.timing.navigationStart&&(m=a.performance.timing.navigationStart),l=Date.now?function(){return Date.now()-m}:function(){return+new Date-m});var p,q,r,s=!1,t={};"undefined"!=typeof a&&(q=a,r=q.mPulse),p={version:j,noConflict:e,init:f};for(var o=0;o<k.length;o++)p[k[o]]=g;"function"==typeof define&&define.amd?define([],function(){return p}):"undefined"!=typeof module&&module.exports?module.exports=p:"undefined"!=typeof q&&(q.mPulse=p)}("undefined"!=typeof window?window:void 0);
//# sourceMappingURL=mpulse.min.js.map